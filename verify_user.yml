---
- name: Verify the carlos user was created
  hosts: servidores
  become: true

  tasks:
    - name: Verificar si carlos existe
      ansible.builtin.command: id carlos
      register: carlos_check
      ignore_errors: true
      changed_when: false

    - name: Mostrar si carlos fue encontrado
      ansible.builtin.debug:
        msg: "Carlos was created"
      when: carlos_check.rc == 0

    - name: Escribir en archivo si carlos fue encontrado
      ansible.builtin.lineinfile:
        path: /home/student/verify.txt
        line: "Carlos was created"
        create: true
      when: carlos_check.rc == 0
